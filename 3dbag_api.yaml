---
openapi: 3.0.3
info:
  title: '3D BAG plus API'
  description: |-
  
    The [3D BAG](https://3dbag.nl) is an up-to-date data set containing 3D building models of the Netherlands. 
    The 3D BAG is open data. It contains 3D models at multiple levels of detail, 
    which are generated by combining two open data sets: 
    the building data from the BAG and the height data from the AHN. 
    The 3D BAG is updated regularly, keeping it up-to-date with the latest openly 
    available building stock and elevation information.
    
    3D BAG plus is an extended version of the 3D BAG data set.
    It contains additional information that is either derived from the 3D BAG,
    or integrated from other data sources.
    The 3D BAG plus is created and maintained by 3DGI.
    
    Copyright (c) 2022 3DGI.
  version: 0.1.0
  contact:
    name: "3DGI"
    email: info@3dbag.nl
    url: https://docs.3dbag.nl/en/contact/ #TODO
  license:
    name: 3DGI License
    url: https://3dgi.nl/legal #TODO
  x-logo:
    url: https://3dgi.nl/img/Logo-02.png
servers:
  - url: https://data.3dbag.nl/api/3dbagplus
    description: 3D BAG plus server
tags:
  - name: Capabilities
    description: |-
      essential characteristics of this API
  - name: Data
    description: |-
      access to data (features)
paths:
  '/':
    get:
      tags:
        - Capabilities
      summary: landing page
      description: |-
        The landing page provides links to the API definition, the conformance
        statements and to the feature collections in this dataset.
      operationId: getLandingPage
      responses:
        '200':
          $ref: '#/components/responses/LandingPage'
        '500':
          $ref: '#/components/responses/ServerError'
  '/conformance':
    get:
      tags:
        - Capabilities
      summary: information about specifications that this API conforms to
      description: |-
        A list of all conformance classes specified in a standard that the
        server conforms to.
      operationId: getConformanceDeclaration
      responses:
        '200':
          $ref: '#/components/responses/ConformanceDeclaration'
        '500':
          $ref: '#/components/responses/ServerError'

components:
  schemas:
    link:
      type: object
      required:
        - href
        - rel
      properties:
        href:
          type: string
          example: https://data.3dbag.nl/api/3dbagplus/collections/pand/items/0851100000000564/0851100000000564-0
        rel:
          type: string
          example: alternate
        type:
          type: string
          example: application/city+json
        hreflang:
          type: string
          example: en
        title:
          type: string
          example: Spui 70, 2511 BT Den Haag
        length:
          type: integer
    landingPage:
      type: object
      required:
        - links
      properties:
        title:
          type: string
        description:
          type: string
        links:
          type: array
          items:
            $ref: '#/components/schemas/link'
    exception:
      type: object
      required:
        - code
      properties:
        code:
          type: string
        description:
          type: string
    confClasses:
      type: object
      required:
        - conformsTo
      properties:
        conformsTo:
          type: array
          items:
            type: string
  responses:
    LandingPage:
      description: |-
        The landing page provides links to the API definition 
        (link relations `service-desc` and `service-doc`), 
        the Conformance declaration (path `/conformance`, 
        link relation `conformance`), and the Feature 
        Collections (path `/collections`, link relation 
        `data`).
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/landingPage'
          example:
            title: 3D BAG plus
            description: TODO data set description.
            links:
              - href: https://data.3dbag.nl/api/3dbagplus
                rel: self
                type: application/json
                title: this document
              - href: https://data.3dbag.nl/api/3dbagplus/api
                rel: service-desc
                type: application/vnd.oai.openapi+json;version=3.0
                title: the API definition
              - href: https://data.3dbag.nl/api/3dbagplus/api.html
                rel: service-doc
                type: text/html
                title: the API documentation
              - href: https://data.3dbag.nl/api/3dbagplus/conformance
                rel: conformance
                type: application/json
                title: OGC API conformance classes implemented by this server
              - href: https://data.3dbag.nl/api/3dbagplus/collections
                rel: data
                type: application/json
                title: Information about the feature collections
    ServerError:
      description: |-
        A server error occurred.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/exception'
    ConformanceDeclaration:
      description: |-
        The URIs of all conformance classes supported by the server.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/confClasses'
          example:
            conformsTo:
              - 'http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/core'
              - 'http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30'
              - 'https://www.cityjson.org/specs/1.1.1'